"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[170],{1926:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var i=n(4848),t=n(8453);const r={},o="Known limitations",l={id:"knowledge/limitations",title:"Known limitations",description:"Most Go apps can be compiled and run with EGo without modifications. However, there are some limitations:",source:"@site/docs/knowledge/limitations.md",sourceDirName:"knowledge",slug:"/knowledge/limitations",permalink:"/ego/pr-preview/pr-323/knowledge/limitations",draft:!1,unlisted:!1,editUrl:"https://github.com/edgelesssys/ego/edit/master/docs/docs/knowledge/limitations.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Programming model",permalink:"/ego/pr-preview/pr-323/knowledge/model"},next:{title:"Secure storage",permalink:"/ego/pr-preview/pr-323/knowledge/storage"}},c={},d=[{value:"(Partially) unsupported packages",id:"partially-unsupported-packages",level:2},{value:"cgo: Unsupported <code>libc</code> functions",id:"cgo-unsupported-libc-functions",level:2},{value:"Different behavior",id:"different-behavior",level:2},{value:"<code>statfs</code>",id:"statfs",level:3}];function a(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"known-limitations",children:"Known limitations"})}),"\n",(0,i.jsx)(s.p,{children:"Most Go apps can be compiled and run with EGo without modifications. However, there are some limitations:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"An EGo app is a single process. Spawning other processes isn't possible."}),"\n",(0,i.jsx)(s.li,{children:"A nil pointer dereference aborts the process without calling deferred functions."}),"\n",(0,i.jsxs)(s.li,{children:["cgo support is experimental","\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Libraries must be statically linked. Shared objects are unsupported."}),"\n",(0,i.jsxs)(s.li,{children:["Libraries must be compiled with ",(0,i.jsx)(s.code,{children:"-fPIC"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"partially-unsupported-packages",children:"(Partially) unsupported packages"}),"\n",(0,i.jsx)(s.p,{children:"These usually compile, but return an error at runtime."}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"os"}),": ",(0,i.jsx)(s.code,{children:"Pipe"})," and ",(0,i.jsx)(s.code,{children:"StartProcess"})," are unsupported"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"os/exec"}),": spawning processes is unsupported"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"os/signal"}),": signals aren't passed to the enclave"]}),"\n"]}),"\n",(0,i.jsxs)(s.h2,{id:"cgo-unsupported-libc-functions",children:["cgo: Unsupported ",(0,i.jsx)(s.code,{children:"libc"})," functions"]}),"\n",(0,i.jsx)(s.p,{children:"Using these functions causes a build, sign, or runtime error."}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"exec"})," family"]}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"fork"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"pipe"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.code,{children:"posix_spawn"})}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"mmap"}),": partially supported; memory-mapped files are unsupported"]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"different-behavior",children:"Different behavior"}),"\n",(0,i.jsx)(s.h3,{id:"statfs",children:(0,i.jsx)(s.code,{children:"statfs"})}),"\n",(0,i.jsxs)(s.p,{children:[(0,i.jsx)(s.code,{children:"statfs"})," returns dummy values, regardless of the path.\nThis ensures that existing code that unconditionally trusts the call's result can be used securely."]}),"\n",(0,i.jsxs)(s.p,{children:["You can request the values from the host by prefixing the path with ",(0,i.jsx)(s.code,{children:"/edg/hostfs"}),", e.g."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:'statfs("/edg/hostfs/", &statbuf)'})," requests info for host path ",(0,i.jsx)(s.code,{children:"/"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:'statfs("/edg/hostfs/foo/bar", &statbuf)'})," requests info for host path ",(0,i.jsx)(s.code,{children:"/foo/bar"})]}),"\n"]}),"\n",(0,i.jsxs)(s.p,{children:["Note that this ignores ",(0,i.jsx)(s.a,{href:"/ego/pr-preview/pr-323/reference/config#mounts",children:"configured mounts"}),"."]}),"\n",(0,i.jsx)(s.p,{children:"Be aware that the returned result isn't trustworthy.\nYou must check the values before taking actions on them."})]})}function h(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>l});var i=n(6540);const t={},r=i.createContext(t);function o(e){const s=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:s},e.children)}}}]);