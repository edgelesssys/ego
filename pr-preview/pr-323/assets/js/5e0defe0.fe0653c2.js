"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[35],{6710:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>t,metadata:()=>i,toc:()=>d});var s=o(4848),r=o(8453);const t={},a="Debug your app",i={id:"workflows/debug",title:"Debug your app",description:"EGo executables can be debugged inside as well as outside of enclaves. Depending on the task, you may prefer one or the other.",source:"@site/docs/workflows/debug.md",sourceDirName:"workflows",slug:"/workflows/debug",permalink:"/ego/pr-preview/pr-323/workflows/debug",draft:!1,unlisted:!1,editUrl:"https://github.com/edgelesssys/ego/edit/master/docs/docs/workflows/debug.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Build your app",permalink:"/ego/pr-preview/pr-323/workflows/build"},next:{title:"Programming model",permalink:"/ego/pr-preview/pr-323/knowledge/model"}},l={},d=[{value:"Outside an enclave",id:"outside-an-enclave",level:2},{value:"Inside an enclave",id:"inside-an-enclave",level:2},{value:"Snap",id:"snap",level:3},{value:"DEB package or built from source",id:"deb-package-or-built-from-source",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"debug-your-app",children:"Debug your app"})}),"\n",(0,s.jsx)(n.p,{children:"EGo executables can be debugged inside as well as outside of enclaves. Depending on the task, you may prefer one or the other."}),"\n",(0,s.jsx)(n.h2,{id:"outside-an-enclave",children:"Outside an enclave"}),"\n",(0,s.jsx)(n.p,{children:"An EGo executable can be run as a normal host process without an enclave. Thus, it can also be debugged like any other Go program. This should be your first attempt if the problem isn't related to specific enclave functionality. Use your favorite tools (e.g. the Delve debugger) as usual."}),"\n",(0,s.jsx)(n.h2,{id:"inside-an-enclave",children:"Inside an enclave"}),"\n",(0,s.jsxs)(n.p,{children:["EGo comes with ",(0,s.jsx)(n.code,{children:"ego-gdb"})," that augments ",(0,s.jsx)(n.code,{children:"gdb"})," with enclave support.\nFor a better debugging experience with it, compile your app without optimizations by passing ",(0,s.jsx)(n.code,{children:'-gcflags=all="-N -l"'})," to ",(0,s.jsx)(n.code,{children:"ego-go build"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"console"})," interface of ",(0,s.jsx)(n.code,{children:"ego-gdb"})," is the same as ",(0,s.jsx)(n.code,{children:"gdb"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ego-gdb --args ./helloworld\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The enclave may raise SIGILL signals during startup. These are expected and will be handled by EGo, so you can just ",(0,s.jsx)(n.code,{children:"continue"}),". Use ",(0,s.jsx)(n.code,{children:"handle SIGILL nostop"})," to do this automatically."]}),"\n",(0,s.jsxs)(n.p,{children:["Setting up the ",(0,s.jsx)(n.code,{children:"mi"})," interface for Visual Studio Code is a bit trickier. First, install the ",(0,s.jsx)(n.a,{href:"https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools",children:"C/C++ extension"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["Use one of the following templates for your ",(0,s.jsx)(n.code,{children:".vscode/launch.json"})," file. Just replace ",(0,s.jsx)(n.code,{children:"samples/helloworld/helloworld"})," with the path to your EGo executable."]}),"\n",(0,s.jsx)(n.h3,{id:"snap",children:"Snap"}),"\n",(0,s.jsx)(n.p,{children:"If you installed the EGo snap, use this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "version": "0.2.0",\n    "configurations": [\n        {\n            "name": "(gdb) Launch",\n            "type": "cppdbg",\n            "request": "launch",\n            "program": "/snap/ego-dev/current/opt/ego/bin/ego-host",\n            "args": [\n                "/snap/ego-dev/current/opt/ego/share/ego-enclave:samples/helloworld/helloworld",\n                "arg1",\n                "arg2"\n            ],\n            "cwd": "${workspaceFolder}",\n            "environment": [\n                {\n                    "name": "LD_LIBRARY_PATH",\n                    "value": "/snap/ego-dev/current/usr/lib/x86_64-linux-gnu"\n                }\n            ],\n            "MIMode": "gdb",\n            "miDebuggerPath": "/snap/ego-dev/current/opt/ego/bin/ego-gdb",\n            "setupCommands": [\n                {\n                    "description": "Enable pretty-printing for gdb",\n                    "text": "-enable-pretty-printing",\n                    "ignoreFailures": true\n                },\n                {\n                    "text": "handle SIGILL nostop"\n                }\n            ]\n        }\n    ]\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"deb-package-or-built-from-source",children:"DEB package or built from source"}),"\n",(0,s.jsx)(n.p,{children:"If you installed the DEB package or built it yourself, use this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n    "version": "0.2.0",\n    "configurations": [\n        {\n            "name": "(gdb) Launch",\n            "type": "cppdbg",\n            "request": "launch",\n            "program": "/opt/ego/bin/ego-host",\n            "args": [\n                "/opt/ego/share/ego-enclave:samples/helloworld/helloworld",\n                "arg1",\n                "arg2"\n            ],\n            "cwd": "${workspaceFolder}",\n            "environment": [],\n            "MIMode": "gdb",\n            "miDebuggerPath": "/opt/ego/bin/ego-gdb",\n            "setupCommands": [\n                {\n                    "description": "Enable pretty-printing for gdb",\n                    "text": "-enable-pretty-printing",\n                    "ignoreFailures": true\n                },\n                {\n                    "text": "handle SIGILL nostop"\n                }\n            ]\n        }\n    ]\n}\n'})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>a,x:()=>i});var s=o(6540);const r={},t=s.createContext(r);function a(e){const n=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);