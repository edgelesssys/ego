"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[817],{134:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>a,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>c,toc:()=>l});var s=n(4848),i=n(8453);const r={},o="TLS inside the enclave",c={id:"knowledge/tls",title:"TLS inside the enclave",description:"Accepting or establishing TLS connections inside the enclave has peculiarities you should be aware of.",source:"@site/docs/knowledge/tls.md",sourceDirName:"knowledge",slug:"/knowledge/tls",permalink:"/ego/knowledge/tls",draft:!1,unlisted:!1,editUrl:"https://github.com/edgelesssys/ego/edit/master/docs/docs/knowledge/tls.md",tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Secure storage",permalink:"/ego/knowledge/storage"},next:{title:"CLI",permalink:"/ego/reference/cli"}},a={},l=[{value:"Hosting a TLS server",id:"hosting-a-tls-server",level:2},{value:"Connecting to a TLS server",id:"connecting-to-a-tls-server",level:2},{value:"Embed root certificates",id:"embed-root-certificates",level:3},{value:"Skip verification",id:"skip-verification",level:3}];function d(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"tls-inside-the-enclave",children:"TLS inside the enclave"})}),"\n",(0,s.jsx)(t.p,{children:"Accepting or establishing TLS connections inside the enclave has peculiarities you should be aware of."}),"\n",(0,s.jsx)(t.h2,{id:"hosting-a-tls-server",children:"Hosting a TLS server"}),"\n",(0,s.jsxs)(t.p,{children:["You need to consider how to securely provide the enclave with a private key.\nA common approach is to let the enclave generate the key itself and bind it to a remote attestation statement.\nIn practice, this means that the enclave includes the hash of the public key in the attestation report.\nSee the ",(0,s.jsx)(t.a,{href:"https://github.com/edgelesssys/ego/tree/master/samples/remote_attestation",children:"remote attestation sample"})," on how to do this."]}),"\n",(0,s.jsxs)(t.p,{children:["EGo offers an API that simplifies this common pattern.\nSee the ",(0,s.jsx)(t.a,{href:"https://github.com/edgelesssys/ego/tree/master/samples/attested_tls",children:"attested TLS sample"})," for details."]}),"\n",(0,s.jsx)(t.h2,{id:"connecting-to-a-tls-server",children:"Connecting to a TLS server"}),"\n",(0,s.jsx)(t.p,{children:"A client needs a set of root certificates to verify a TLS server.\nThe enclave can't trust the host's root certificates.\nThus, you need to consider how to securely provide the enclave with these certificates."}),"\n",(0,s.jsx)(t.h3,{id:"embed-root-certificates",children:"Embed root certificates"}),"\n",(0,s.jsxs)(t.p,{children:["You can embed root certificates in the enclave binary.\nTo embed the certificates of your trusted development/build machine, add to ",(0,s.jsx)(t.a,{href:"/ego/reference/config#embedded-files",children:"enclave.json"}),":"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-json",children:'    "files": [\n        {\n            "source": "/etc/ssl/certs/ca-certificates.crt",\n            "target": "/etc/ssl/certs/ca-certificates.crt"\n        }\n    ]\n'})}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.a,{href:"https://github.com/edgelesssys/ego/tree/master/samples/embedded_file",children:"embedded files sample"})," demonstrates this use case."]}),"\n",(0,s.jsx)(t.h3,{id:"skip-verification",children:"Skip verification"}),"\n",(0,s.jsx)(t.p,{children:"There may be cases where you don't need trust in the server:"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"You don't send secret data to the server"}),"\n",(0,s.jsx)(t.li,{children:"and you don't need trust in the replied data or you verify the data by other means."}),"\n"]}),"\n",(0,s.jsx)(t.p,{children:"Then you can skip verification:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-go",children:'tlsConfig := &tls.Config{InsecureSkipVerify: true}\nclient := http.Client{Transport: &http.Transport{TLSClientConfig: tlsConfig}}\nresp, err := client.Get("https://...")\n'})})]})}function h(e={}){const{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,t,n)=>{n.d(t,{R:()=>o,x:()=>c});var s=n(6540);const i={},r=s.createContext(i);function o(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);